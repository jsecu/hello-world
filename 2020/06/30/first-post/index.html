<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Lazysysadmin CTF WriteUp | JSECU</title><meta name="description" content="JSECU"><meta itemprop="name" content="JSECU"><meta itemprop="description" content="JSECU"><meta itemprop="image" content="http://localhost:4000/images/placeholder-12.jpg"><meta property="og:url" content="http://localhost:4000/2020/06/30/first-post/"><meta property="og:type" content="website"><meta property="og:title" content="Lazysysadmin CTF WriteUp | JSECU"><meta property="og:site_name" content="JSECU"><meta property="og:description" content="JSECU"><meta property="og:image" content="http://localhost:4000/images/placeholder-12.jpg"><meta name="twitter:url" content="/2020/06/30/first-post/"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Lazysysadmin CTF WriteUp | JSECU"><meta name="twitter:site" content="JSECU"><meta name="twitter:description" content="JSECU"><meta name="twitter:creator" content="@Pullerze"><meta property="twitter:image" content="http://localhost:4000/images/placeholder-12.jpg"><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"><link rel="stylesheet" href="/assets/css/app.min.css"><link rel="alternate" type="application/rss+xml" title="JSECU" href="/feed.xml"><link rel="canonical" href="/2020/06/30/first-post/"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'n', 'auto'); ga('send', 'pageview'); </script></head><body id="lazysysadmin-ctf-writeup" class="post-layout"><header class="header"> <a class="header__title" href="/">JSECU</a><nav><ul class="header__list"><li><a href="/">Posts</a></li><li><a href="/about">About</a></li></ul></nav></header><main class="üíà"><div class="post"><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding--double"><div class="grid-small"><h2 itemprop="name headline">Lazysysadmin CTF WriteUp</h2><time class="post__date" datetime="2020-06-30T18:40:20-04:00" itemprop="datePublished">30 Jun 2020</time></div></div><div class="post__content section-padding"><div class="grid"><div id="markdown" itemprop="articleBody"><p>This is my first boot2root writeup and hopefully it‚Äôs written clearly and your able to follow along. Anyway LazySysAdmin is a beginner box and if you have through enumeration tactics it should be pretty straightforward. Alright let‚Äôs get into it.</p><p>First we‚Äôll start with a nmap scan to enumerate the open ports running on the machine.</p><p><em>Syntax : nmap -sV -sC -T4 192.168.179.130</em> <img src="../../../../images/lazyadmin-1.png" alt="image1" /></p><p>So we see it‚Äôs running a OpenSSH, Apache, Samba and a local MySQL server. Based on previous experience I‚Äôll already cross out OpenSSH as an inital attack vector, based on it usually being pretty secure and brute forcing an ssh login is always a last option especially on most CTFs. Moving on, Apache and Samba are looking the most interesting , MySQL can only be accessed locally on the box so that‚Äôs going to have to wait. I decide to enumerate the Samba service first using the enum4linux tool.</p><p><em>Synatax: enum4linux 192.168.179.130</em> <img src="../../../../images/lazyadmin-2.png" alt="image2" /></p><p>Looking at the enum4linux scan results I saw the Samba version which was 4.3.11. It also showed some open mappings of some shares on the box. Seems the scan also found the username of a local user ‚Äútogie‚Äù. Keeping that username in my backpocket I decided to look through the shares using smbclient since the share named ‚Äúshare$‚Äù was openly readable.</p><p><em>Syntax: smbclient \\192.168.179.130\share$</em> <img src="../../../../images/smbclient-lazy-5.png" alt="image2" /></p><p>Sheesh looks like I found the web root share, which was openly accessible without a password, big mistake on the admin‚Äôs part. Now after discovering this I decided to start enumerating what I found in the share by navigating to them on the actual web server. After looking around it looked like the only interesting files were deets.txt and the WordPress folder. Most of the other folders were image folders or empty and the todolist.txt was just a message to the admin to himself saying to lock up the samba share I already had accessed. The deets.txt file ended up containing a leftover password.</p><p><img src="../../../../images/deets.txt-lazy-6.png" alt="image2" /></p><p>Going to save it for later,could be used later for a login. Navigating into the WordPress directory, we‚Äôre greeted with a WordPress page:</p><p><img src="../../../../images/wordpress-6.png" alt="image2" /></p><p>Clearly this user togie is important, since he‚Äôs a local user and his name is plastered all over the front page of the WordPress site. So after seeing this I decided to try testing the user togie with the password found earlier in the deets text file on the different logins found in the box. First was the WordPress login page, however it turned out to be a dud. After that remembering that ssh was also open, I tried the same combination of credentials there and funny enough it logged me in :</p><p><img src="../../../../images/ssh-7-lazy.png" alt="image2" /></p><p>We‚Äôre in but it seems that my shell is restricted. However since this ssh, a easy way to get around this is to just specify -t , which allows you to run screen commands in a pseudo tty environment, and typing bash ‚Äìno profile, which disables all user configuration for bash, including the restriction settings. After this we‚Äôre welcomed with a unrestricted shell.</p><p><img src="../../../../images/ssh-8-lazy.png" alt="image3" /></p><p>After this it‚Äôs time to try to escalate privilege to root. The first things I do at this stage is run sudo -l on the user I‚Äôm using , hoping for some quick wins. :</p><p><img src="../../../../images/ssh-9-lazy.png" alt="image3" /></p><p>Well it looks like the user togie can run all commands with root privileges, not good practices from this admin, but it‚Äôs good for me of course. After this it‚Äôs a simple matter to gain root, just typing sudo bash should give me a bash shell running as root :</p><p><img src="../../../../images/root-lazyadmin-10.png" width="2000" /></p><p>There we go, root!</p></div><ul class="post__social"><li><a href="https://www.facebook.com/sharer/sharer.php?u=jsecu.github.io" target="_blank"><i class="fa fa-facebook"></i></a></li><li><a href="https://twitter.com/intent/tweet?&text=Lazysysadmin CTF WriteUp+https://jsecu.github.io" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="https://plus.google.com/share?url=https://jsecu.github.io" target="_blank"><i class="fa fa-google-plus"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&source=Lazysysadmin CTF WriteUp&summary=&url=https://jsecu.github.io" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://www.stumbleupon.com/badge/?url=https://jsecu.github.io" target="_blank"><i class="fa fa-stumbleupon"></i></a></li><li><a href="https://www.reddit.com/submit?url=https://jsecu.github.io" target="_blank"><i class="fa fa-reddit-alien"></i></a></li><li><a href="https://www.tumblr.com/share/link?url=https://jsecu.github.io" target="_blank"><i class="fa fa-tumblr"></i></a></li><li><a href="https://www.pinterest.com/pin/create/link/?description=&media=https://jsecu.github.io&url=https://jsecu.github.io" target="_blank"><i class="fa fa-pinterest"></i></a></li></ul></div></div></article></div></main><footer class="footer section-padding"><div class="grid"><div class="subscribe" id="subscribe"><div class="subscribe__container"> <span class="subscribe__title">JSECU</span><p class="subscribe__text">Enjoy your stay</p></div></div><hr class="sep--white"/><div class="footer__container"><ul class="footer__tags"></ul><ul class="footer__social"><li><a href="https://twitter.com/Pullerze" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="" target="_blank"><i class="fa fa-instagram"></i></a></li><li><a href="" target="_blank"><i class="fa fa-linkedin"></i></a></li><li><a href="https://github.com/jsecu" target="_blank"><i class="fa fa-github"></i></a></li><li><a href="" target="_blank"><i class="fa fa-codepen"></i></a></li></ul></div></div></footer><section class="contact popup"><div class="popup__close"><div class="popup__exit"></div></div><div class="contact__container popup__container"><div class="contact__img"><figure class="absolute-bg" style="background-image: url(/assets/images/placeholder-28.jpg);"></figure></div><div class="contact__content"><div class="contact__mast section-padding--half"><div class="grid"><h2>Cont</h2></div></div><div class="section-padding--none"><hr class="sep"/></div><div class="contact__form section-padding--half"><div class="grid-xlarge"> <form id="form" class="form" action="" method="POST"><div class="form__subcontainer"><div> <label for="form-first-name">First Name</label> <input type="text" name="first-name" id="form-first-name" required></div><div> <label for="form-last-name">Last Name</label> <input type="text" name="last-name" id="form-last-name" required></div></div><div> <label for="form-email">E-Mail</label> <input type="email" name="email" id="form-email" required></div><div> <label for="form-message">Message</label> <textarea name="message" id="form-message" rows="3"></textarea></div><div class="form__submit"><div class="form__btn"> <input type="submit" value="Send"></div></div><p class="form__message"></p></form></div></div></div></div></section><script src="/assets/js/app.min.js"></script></body></html>
  